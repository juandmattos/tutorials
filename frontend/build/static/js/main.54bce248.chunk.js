(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){e.exports={main:"NavigationBar_main__2-5O2",header:"NavigationBar_header__Z5Twx",logo:"NavigationBar_logo__2yR9Z",nav:"NavigationBar_nav__1PSMP",active:"NavigationBar_active__3OjPg"}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1),a=Object(r.createContext)({isLoggedIn:!1,token:null,userId:null,login:function(){},logout:function(){}})},function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"h",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"f",(function(){return j})),n.d(t,"g",(function(){return b})),n.d(t,"b",(function(){return h}));var r=n(2),a=n.n(r),c=n(7),o="http://localhost:8000/api/v1",s=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(o,"/tutorials"));case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,t.ok){e.next=8;break}throw new Error("Could not fetch tutorials.");case 8:return e.abrupt("return",n.tutorials);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,s,i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(o,"/tutorials/").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:if(r=e.sent,n.ok){e.next=8;break}throw new Error("Could not fetch tutorial.");case 8:return c=r.title,s=r.description,i=r.videoUrl,u=r.publishedStatus,l=r.creator,d={id:t,title:c,description:s,videoUrl:i,publishedStatus:u,creator:l},e.abrupt("return",d);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,e.next=3,fetch("".concat(o,"/signup"),{method:"POST",body:JSON.stringify({email:n,password:r}),headers:{"Content-Type":"application/json"}});case 3:if((c=e.sent).ok){e.next=6;break}throw new Error("No se pudo hacer el signin");case 6:return e.next=8,c.json();case 8:return s=e.sent,e.abrupt("return",s.userData);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,e.next=3,fetch("".concat(o,"/login"),{method:"POST",body:JSON.stringify({email:n,password:r}),headers:{"Content-Type":"application/json"}});case 3:if((c=e.sent).ok){e.next=6;break}throw new Error("No se pudo hacer el login");case 6:return e.next=8,c.json();case 8:return s=e.sent,e.abrupt("return",s.userData);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(o,"/tutorials/").concat(t),{method:"Delete",body:null,headers:{Authorization:"Bearer "+n}});case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Could not fetch tutorial.");case 5:return e.next=7,r.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(o,"/tutorials/mass_delete"),{method:"Delete",body:null,headers:{Authorization:"Bearer "+t}});case 2:if(e.sent.ok){e.next=5;break}throw new Error("Could not fetch tutorial.");case 5:return e.abrupt("return",{});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(o,"/tutorials"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}});case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Could not create tutorial.");case 5:return e.next=7,r.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r){var c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(o,"/tutorials/").concat(t),{method:"PUT",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+r}});case 2:if((c=e.sent).ok){e.next=5;break}throw new Error("Could not edit tutorial.");case 5:return e.next=7,c.json();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},function(e,t,n){"use strict";n(1);var r=n(5),a=(n(46),n(0));t.a=function(e){return e.href?Object(a.jsx)("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href,children:e.children}):e.to?Object(a.jsx)(r.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),children:e.children}):Object(a.jsx)("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),type:e.type,onClick:e.onClick,disabled:e.disabled,children:e.children})}},,function(e,t,n){"use strict";n(1),n(49);var r=n(0);t.a=function(e){return Object(r.jsx)("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay"),children:Object(r.jsx)("div",{className:"lds-dual-ring"})})}},,,,function(e,t,n){"use strict";var r=n(18),a=n(1),c=n.n(a),o=n(11),s=n.n(o),i=n(52),u=(n(47),n(0)),l=function(e){return s.a.createPortal(Object(u.jsx)("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))},d=(n(48),function(e){var t=Object(u.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[Object(u.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:Object(u.jsx)("h2",{children:e.header})}),Object(u.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()},children:[Object(u.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),Object(u.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return s.a.createPortal(t,document.getElementById("modal-hook"))});t.a=function(e){return Object(u.jsxs)(c.a.Fragment,{children:[e.show&&Object(u.jsx)(l,{onClick:e.onCancel}),Object(u.jsx)(i.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:Object(u.jsx)(d,Object(r.a)({},e))})]})}},,,,function(e,t,n){"use strict";var r=n(18),a=n(2),c=n.n(a),o=n(7),s=n(10),i=n(1);function u(e,t){return"SEND"===t.type?{data:null,error:null,status:"pending"}:"SUCCESS"===t.type?{data:t.responseData,error:null,status:"completed"}:"ERROR"===t.type?{data:null,error:t.errorMessage,status:"completed"}:e}t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(i.useReducer)(u,{status:t?"pending":null,data:null,error:null}),a=Object(s.a)(n,2),l=a[0],d=a[1],j=Object(i.useCallback)(function(){var t=Object(o.a)(c.a.mark((function t(n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d({type:"SEND"}),t.prev=1,t.next=4,e(n);case 4:r=t.sent,d({type:"SUCCESS",responseData:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),d({type:"ERROR",errorMessage:t.t0.message||"Something went wrong!"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(r.a)({sendRequest:j},l)}},,,function(e,t,n){e.exports={notutorials:"NoTutorialsFound_notutorials__1PQtM"}},function(e,t,n){e.exports={item:"TutorialItem_item__2JT9x"}},function(e,t,n){e.exports={list:"TutorialList_list__2hLfc",deleteButton:"TutorialList_deleteButton__2UM8z"}},,,,,,function(e,t,n){},,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r,a=n(1),c=n.n(a),o=n(11),s=n.n(o),i=(n(38),n(3)),u=n(5),l=n(15),d=n(12),j=n.n(d),b=n(0),h=function(){var e=Object(a.useContext)(l.a);return Object(b.jsxs)("header",{className:j.a.header,children:[Object(b.jsx)("div",{className:j.a.logo,children:"Tutos.com"}),Object(b.jsx)("nav",{className:j.a.nav,children:Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)(u.c,{to:"/tutorials",activeClassName:j.a.active,children:"Tutoriales"})}),e.isLoggedIn&&Object(b.jsx)("li",{children:Object(b.jsx)(u.c,{to:"/new-tutorial",activeClassName:j.a.active,children:"Agregar Tutorial"})}),!e.isLoggedIn&&Object(b.jsx)("li",{children:Object(b.jsx)(u.c,{to:"/login",activeClassName:j.a.active,children:"Login"})}),e.isLoggedIn&&Object(b.jsx)("li",{children:Object(b.jsx)(u.c,{to:"/tutorials",onClick:e.logout,children:"Logout"})})]})})]})},f=function(e){return Object(b.jsxs)(a.Fragment,{children:[Object(b.jsx)(h,{}),Object(b.jsx)("main",{className:j.a.main,children:e.children})]})},p=n(30),O=n.n(p),x=function(e){return Object(b.jsxs)("div",{className:O.a.notutorials,children:[Object(b.jsx)("p",{children:e.message}),Object(b.jsx)(u.b,{className:"btn",to:"/new-tutorial",children:"Agregar un tutorial"})]})},m=n(2),v=n.n(m),g=n(7),w=n(10),k=n(31),y=n.n(k),N=function(e){return Object(b.jsxs)("li",{className:y.a.item,children:[Object(b.jsxs)("figure",{children:[Object(b.jsx)("blockquote",{children:Object(b.jsx)("p",{children:e.title})}),Object(b.jsx)("figcaption",{children:e.description})]}),Object(b.jsx)(u.b,{className:"btn",to:"/tutorials/".concat(e.id),children:"Detalles"})]})},C=n(17),_=n(23),S=n(16),E=n(32),T=n.n(E),I=function(e){var t=Object(a.useState)(e.tutorials),n=Object(w.a)(t,2),r=n[0],o=n[1],s=Object(a.useState)(!1),u=Object(w.a)(s,2),d=u[0],j=u[1],h=Object(a.useState)(!1),f=Object(w.a)(h,2),p=f[0],O=f[1],m=Object(a.useState)(),k=Object(w.a)(m,2),y=k[0],E=k[1],I=Object(a.useContext)(l.a),D=Object(i.h)(),B=function(){return O(!1)},L=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!1),e.prev=1,e.next=4,Object(S.f)(I.token);case 4:E(null),D.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),E("No se pudo borrar todos los tutoriales");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(a.Fragment,{children:[Object(b.jsx)(_.a,{show:p,onCancel:B,header:"Estas Seguro?",footerClass:"place-item__modal-actions",footer:Object(b.jsxs)(c.a.Fragment,{children:[Object(b.jsx)(C.a,{inverse:!0,onClick:B,children:"CANCELAR"}),Object(b.jsx)(C.a,{danger:!0,onClick:L,children:"BORRAR TODOS"})]}),children:Object(b.jsx)("p",{children:"Estas seguro de querer borrar todos tus tutoriales?"})}),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:Object(b.jsx)("input",{placeholder:"Buscar por t\xedtulo o descripci\xf3n",onKeyUp:function(t){j(!1);var n=t.target.value.toLowerCase(),r=e.tutorials.filter((function(e){var t=e.title.toLowerCase(),r=e.description.toLowerCase();return t.includes(n)||r.includes(n)}));0===(null===r||void 0===r?void 0:r.length)&&j(!0),o(r)}})}),I.isLoggedIn&&Object(b.jsxs)("div",{children:[Object(b.jsx)("hr",{}),Object(b.jsx)(C.a,{danger:!0,onClick:function(){return O(!0)},children:"Borrar todos tus tutoriales"}),y]}),Object(b.jsx)("h1",{children:"Tutoriales"}),d&&Object(b.jsx)(x,{message:"No se encontr\xf3 ese tutorial!"}),Object(b.jsx)("ul",{className:T.a.list,children:r.map((function(e){return Object(b.jsx)(N,{id:e._id,title:e.title,description:e.description},e._id)}))})]})]})},D=n(19),B=n(27),L=function(){var e=Object(B.a)(S.c,!0),t=e.sendRequest,n=e.status,r=e.data,c=e.error;return Object(a.useEffect)((function(){t()}),[t]),"pending"===n?Object(b.jsx)("div",{className:"centered",children:Object(b.jsx)(D.a,{})}):c?Object(b.jsx)("p",{className:"centered focused",children:c}):"completed"!==n||r&&0!==r.length?Object(b.jsx)(I,{tutorials:r}):Object(b.jsx)(x,{message:"No hay tutoriales aqu\xed!"})},R=c.a.lazy((function(){return n.e(4).then(n.bind(null,66))})),z=c.a.lazy((function(){return n.e(3).then(n.bind(null,64))})),P=c.a.lazy((function(){return n.e(5).then(n.bind(null,67))})),A=c.a.lazy((function(){return n.e(7).then(n.bind(null,65))})),J=c.a.lazy((function(){return n.e(6).then(n.bind(null,68))})),U=function(){var e=function(){var e=Object(a.useState)(!1),t=Object(w.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(),s=Object(w.a)(o,2),i=s[0],u=s[1],l=Object(a.useState)(!1),d=Object(w.a)(l,2),j=d[0],b=d[1],h=Object(a.useCallback)((function(e,t,n){c(t),b(e);var r=n||new Date((new Date).getTime()+36e5);u(r),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:r.toISOString()}))}),[]),f=Object(a.useCallback)((function(){c(null),u(null),b(null),localStorage.removeItem("userData")}),[]);return Object(a.useEffect)((function(){if(n&&i){var e=i.getTime()-(new Date).getTime();r=setTimeout(f,e)}else clearTimeout(r)}),[n,f,i]),Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&h(e.userId,e.token,new Date(e.expiration))}),[h]),{token:n,login:h,logout:f,userId:j}}(),t=e.token,n=e.login,c=e.logout,o=e.userId;return Object(b.jsx)(l.a.Provider,{value:{isLoggedIn:!!t,token:t,userId:o,login:n,logout:c},children:Object(b.jsx)(f,{children:Object(b.jsx)(a.Suspense,{fallback:Object(b.jsx)("div",{className:"centered",children:Object(b.jsx)(D.a,{})}),children:Object(b.jsxs)(i.e,{children:[Object(b.jsx)(i.c,{path:"/",exact:!0,children:Object(b.jsx)(i.b,{to:"/tutorials"})}),Object(b.jsx)(i.c,{path:"/tutorials",exact:!0,children:Object(b.jsx)(L,{})}),Object(b.jsx)(i.c,{path:"/tutorials/:tutorialId",exact:!0,children:Object(b.jsx)(P,{})}),Object(b.jsx)(i.c,{path:"/tutorials/edit/:tutorialId",children:Object(b.jsx)(z,{})}),Object(b.jsx)(i.c,{path:"/new-tutorial",children:Object(b.jsx)(R,{})}),Object(b.jsx)(i.c,{path:"/login",children:Object(b.jsx)(J,{})}),Object(b.jsx)(i.c,{path:"*",children:Object(b.jsx)(A,{})})]})})})})};s.a.render(Object(b.jsx)(u.a,{children:Object(b.jsx)(U,{})}),document.getElementById("root"))}],[[50,1,2]]]);
//# sourceMappingURL=main.54bce248.chunk.js.map